{% extends "base.html" %}
{% load static %}
{% load cloudinary %}

{% block content %}
<section id="profile">
    <div class="container d-flex flex-column justify-content-center mt-5">
        <div class="row">
            <div class="col-lg-4 mt-2 text-center">
                {% if "placeholder" in profile.userpic.url %}
                <img style="opacity: 0.4; scale: 0.6;" src="{% static 'assets/img/grateful.png' %}">
                {% else %}
                {% cloudinary profile.userpic height=350 width=350 crop="crop" radius="max" gravity="face" %}
                {% endif %}
            </div>
            <div class="col-lg-8 ">
                <h2>{{ profile.user }} {% if profile.user == request.user %} <a href="{% url 'users:update_profile' profile.pk %}" class="link-primary"><i class='bx bx-pencil' ></i></a>{% endif %}</h2>
                <hr>
                <p class="subtitle text-muted p"><i class='bx bx-map'></i> {{ profile.country.name }}
                    {% if profile.city != "" %}
                    , {{ profile.city}}
                    {% endif %}
                </p>
                <div class="author subtitle p">Languages: {{ profile.languages }}</div>
                <hr>
                <div class="author subtitle p">About me:</div>
                <p>{{ profile.bio }}</p>
                {% if profile.user != request.user %}
                <button type="button" class="btn btn-primary">Contact {{profile.user}}</button>
                {% else %}
                <div class="dropdown">
                    <button class="btn btn-secondary dropdown-toggle btn-warning" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                    Saved posts
                    </button>
                    <ul class="dropdown-menu">
                        {% for bookmark in user.userprofile.bookmarks.all %}
                        <li><a class="dropdown-item" href="{% url 'main:full' bookmark.slug %}">{{bookmark}}</a></li>
                        {% endfor %}
                    </ul>
                </div>
                {% endif %}
            </div>



        </div>
    </div>
</section>

{% endblock %}